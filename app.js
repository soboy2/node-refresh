var fs = require('fs');var url = require('url');var http = require('http');var path = require('path');var express = require('express');var app = express();var server = http.Server(app);var io = require('socket.io')(server);var root = __dirname;server.listen(8000);app.use(function(req, res, next) {  console.log("accessing " + req.url);  var file = url.parse(req.url).pathname;  var mode = 'file-reload';  if(file[file.length - 1] == '/') {    file += 'index.html';    mode = 'reload';    console.log("now accessing " + file);  }  createWatcher(file, mode);  next();});app.use(express.static(root));var watchers = {};function createWatcher(file, event) {  var absolute = path.join(root, file);  if(watchers[absolute]) {    return;  }  fs.watchFile(absolute, function (curr, prev) {   if (curr.mtime.getTime() !== prev.mtime.getTime()) {     console.log('A file has been modified');     io.sockets.emit(event, file);    }  });  watchers[absolute] = true;  console.log(watchers);}